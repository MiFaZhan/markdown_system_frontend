/* color palette from <https://github.com/vuejs/theme> */
:root {
  --vt-c-white: #ffffff;
  --vt-c-white-soft: #f8f8f8;
  --vt-c-white-mute: #f2f2f2;

  --vt-c-black: #181818;
  --vt-c-black-soft: #222222;
  --vt-c-black-mute: #282828;

  --vt-c-indigo: #2c3e50;

  --vt-c-divider-light-1: rgba(60, 60, 60, 0.29);
  --vt-c-divider-light-2: rgba(60, 60, 60, 0.12);
  --vt-c-divider-dark-1: rgba(140, 130, 115, 0.45);
  --vt-c-divider-dark-2: rgba(140, 130, 115, 0.25);

  --vt-c-text-light-1: var(--vt-c-indigo);
  --vt-c-text-light-2: rgba(60, 60, 60, 0.66);
  --vt-c-text-dark-1: #e8e6e3;
  --vt-c-text-dark-2: rgba(232, 230, 227, 0.75);

  /* Dark Reader 风格深色模式调色板 */
  --dr-bg-primary: #181a1b;
  --dr-bg-secondary: #1e2021;
  --dr-bg-tertiary: #242627;
  --dr-bg-elevated: #2a2c2d;
  --dr-bg-hover: #303234;
  --dr-text-primary: #e8e6e3;
  --dr-text-secondary: #b8b5b2;
  --dr-text-muted: #8a8785;
  --dr-border: #3c3f41;
  --dr-border-light: #4a4d50;
  --dr-accent: #5c9aff;
  --dr-accent-hover: #7ab0ff;
  --dr-success: #5cb85c;
  --dr-warning: #d9a34a;
  --dr-danger: #d96459;
  --dr-danger-hover: #e57469;
}

/* semantic color variables for this project */
:root {
  --color-background: var(--vt-c-white);
  --color-background-soft: var(--vt-c-white-soft);
  --color-background-mute: var(--vt-c-white-mute);

  --color-border: var(--vt-c-divider-light-2);
  --color-border-hover: var(--vt-c-divider-light-1);

  --color-heading: var(--vt-c-text-light-1);
  --color-text: var(--vt-c-text-light-1);
  --color-text-secondary: rgba(60, 60, 60, 0.66);
  --color-primary: var(--el-color-primary);

  --section-gap: 160px;

  /* Element Plus 主题适配 */
  --el-bg-color: var(--vt-c-white);
  --el-bg-color-overlay: var(--vt-c-white);
  --el-text-color-primary: var(--vt-c-indigo);
  --el-text-color-regular: var(--vt-c-text-light-1);
  --el-border-color: var(--vt-c-divider-light-2);
  --el-border-color-light: var(--vt-c-divider-light-1);
  --el-fill-color-light: var(--vt-c-white-soft);
  --el-fill-color-blank: var(--vt-c-white);
}

/* 深色模式 - 支持手动切换和跟随系统 */
[data-theme='dark'] {
  /* Dark Reader 风格 - 温暖的深色背景 */
  --color-background: var(--dr-bg-primary);
  --color-background-soft: var(--dr-bg-secondary);
  --color-background-mute: var(--dr-bg-tertiary);

  --color-border: var(--dr-border);
  --color-border-hover: var(--dr-border-light);

  --color-heading: var(--dr-text-primary);
  --color-text: var(--dr-text-primary);
  --color-text-secondary: var(--dr-text-secondary);

  /* Element Plus Dark Reader 风格适配 */
  --el-bg-color: var(--dr-bg-secondary);
  --el-bg-color-page: var(--dr-bg-primary);
  --el-bg-color-overlay: var(--dr-bg-elevated);
  --el-text-color-primary: var(--dr-text-primary);
  --el-text-color-regular: var(--dr-text-primary);
  --el-text-color-secondary: var(--dr-text-secondary);
  --el-text-color-placeholder: var(--dr-text-muted);
  --el-border-color: var(--dr-border-light);
  --el-border-color-light: var(--dr-border);
  --el-border-color-lighter: #353839;
  --el-border-color-extra-light: #2d2f30;
  --el-fill-color: var(--dr-bg-tertiary);
  --el-fill-color-light: var(--dr-bg-secondary);
  --el-fill-color-lighter: var(--dr-bg-primary);
  --el-fill-color-blank: var(--dr-bg-secondary);
  --el-color-white: var(--dr-bg-secondary);
  --el-mask-color: rgba(0, 0, 0, 0.75);

  /* 主色调适配 */
  --el-color-primary: var(--dr-accent);
  --el-color-primary-light-3: #4a7fd9;
  --el-color-primary-light-5: #3d6bb8;
  --el-color-primary-light-7: #2f5797;
  --el-color-primary-light-9: #223f6e;
  --el-color-primary-dark-2: var(--dr-accent-hover);
  --color-primary: var(--dr-accent);

  /* 表格 Dark Reader 风格 */
  --el-table-bg-color: var(--dr-bg-secondary);
  --el-table-tr-bg-color: var(--dr-bg-secondary);
  --el-table-header-bg-color: var(--dr-bg-tertiary);
  --el-table-row-hover-bg-color: var(--dr-bg-hover);
  --el-table-border-color: var(--dr-border);
  --el-table-text-color: var(--dr-text-primary);

  /* 卡片 Dark Reader 风格 */
  --el-card-bg-color: var(--dr-bg-secondary);

  /* 输入框 Dark Reader 风格 */
  --el-input-bg-color: var(--dr-bg-tertiary);
  --el-input-text-color: var(--dr-text-primary);
  --el-input-border-color: var(--dr-border);

  /* 按钮 Dark Reader 风格 */
  --el-button-bg-color: var(--dr-bg-tertiary);
  --el-button-text-color: var(--dr-text-primary);
  --el-button-hover-bg-color: var(--dr-bg-hover);
  --el-button-border-color: var(--dr-border);

  /* 对话框 Dark Reader 风格 */
  --el-dialog-bg-color: var(--dr-bg-secondary);
  --el-dialog-box-shadow: 0 4px 24px rgba(0, 0, 0, 0.5);

  /* 下拉菜单 Dark Reader 风格 */
  --el-dropdown-menu-bg-color: var(--dr-bg-elevated);
  --el-dropdown-menu-border-color: var(--dr-border);

  /* 消息提示 Dark Reader 风格 */
  --el-message-bg-color: var(--dr-bg-elevated);
  --el-message-border-color: var(--dr-border);

  /* 树形控件 Dark Reader 风格 */
  --el-tree-node-hover-bg-color: var(--dr-bg-hover);
}

@media (prefers-color-scheme: dark) {
  :root:not([data-theme='light']) {
    /* Dark Reader 风格 - 温暖的深色背景 */
    --color-background: var(--dr-bg-primary);
    --color-background-soft: var(--dr-bg-secondary);
    --color-background-mute: var(--dr-bg-tertiary);

    --color-border: var(--dr-border);
    --color-border-hover: var(--dr-border-light);

    --color-heading: var(--dr-text-primary);
    --color-text: var(--dr-text-primary);
    --color-text-secondary: var(--dr-text-secondary);

    /* Element Plus Dark Reader 风格适配 */
    --el-bg-color: var(--dr-bg-secondary);
    --el-bg-color-page: var(--dr-bg-primary);
    --el-bg-color-overlay: var(--dr-bg-elevated);
    --el-text-color-primary: var(--dr-text-primary);
    --el-text-color-regular: var(--dr-text-primary);
    --el-text-color-secondary: var(--dr-text-secondary);
    --el-text-color-placeholder: var(--dr-text-muted);
    --el-border-color: var(--dr-border-light);
    --el-border-color-light: var(--dr-border);
    --el-border-color-lighter: #353839;
    --el-border-color-extra-light: #2d2f30;
    --el-fill-color: var(--dr-bg-tertiary);
    --el-fill-color-light: var(--dr-bg-secondary);
    --el-fill-color-lighter: var(--dr-bg-primary);
    --el-fill-color-blank: var(--dr-bg-secondary);
    --el-color-white: var(--dr-bg-secondary);
    --el-mask-color: rgba(0, 0, 0, 0.75);

    /* 主色调适配 */
    --el-color-primary: var(--dr-accent);
    --el-color-primary-light-3: #4a7fd9;
    --el-color-primary-light-5: #3d6bb8;
    --el-color-primary-light-7: #2f5797;
    --el-color-primary-light-9: #223f6e;
    --el-color-primary-dark-2: var(--dr-accent-hover);
    --color-primary: var(--dr-accent);

    /* 表格 Dark Reader 风格 */
    --el-table-bg-color: var(--dr-bg-secondary);
    --el-table-tr-bg-color: var(--dr-bg-secondary);
    --el-table-header-bg-color: var(--dr-bg-tertiary);
    --el-table-row-hover-bg-color: var(--dr-bg-hover);
    --el-table-border-color: var(--dr-border);
    --el-table-text-color: var(--dr-text-primary);

    /* 卡片 Dark Reader 风格 */
    --el-card-bg-color: var(--dr-bg-secondary);

    /* 输入框 Dark Reader 风格 */
    --el-input-bg-color: var(--dr-bg-tertiary);
    --el-input-text-color: var(--dr-text-primary);
    --el-input-border-color: var(--dr-border);

    /* 按钮 Dark Reader 风格 */
    --el-button-bg-color: var(--dr-bg-tertiary);
    --el-button-text-color: var(--dr-text-primary);
    --el-button-hover-bg-color: var(--dr-bg-hover);
    --el-button-border-color: var(--dr-border);

    /* 对话框 Dark Reader 风格 */
    --el-dialog-bg-color: var(--dr-bg-secondary);
    --el-dialog-box-shadow: 0 4px 24px rgba(0, 0, 0, 0.5);

    /* 下拉菜单 Dark Reader 风格 */
    --el-dropdown-menu-bg-color: var(--dr-bg-elevated);
    --el-dropdown-menu-border-color: var(--dr-border);

    /* 消息提示 Dark Reader 风格 */
    --el-message-bg-color: var(--dr-bg-elevated);
    --el-message-border-color: var(--dr-border);

    /* 树形控件 Dark Reader 风格 */
    --el-tree-node-hover-bg-color: var(--dr-bg-hover);
  }
}

*,
*::before,
*::after {
  box-sizing: border-box;
  margin: 0;
}

body {
  min-height: 100vh;
  color: var(--color-text);
  background: var(--color-background);
  transition:
    color 0.3s ease,
    background-color 0.3s ease;
  line-height: 1.6;
  font-family:
    Inter,
    -apple-system,
    BlinkMacSystemFont,
    'Segoe UI',
    Roboto,
    Oxygen,
    Ubuntu,
    Cantarell,
    'Fira Sans',
    'Droid Sans',
    'Helvetica Neue',
    sans-serif;
  font-size: 15px;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Tooltip 弹层不拦截点击，避免遮挡按钮 */
.el-tooltip__popper {
  pointer-events: none !important;
}

/* 移动端点击 SVG 命中按钮 */
.el-button .el-icon,
.el-button svg {
  pointer-events: none !important;
}

/* 统一 el-tree 行样式，由自定义节点负责 hover/active */
.el-tree-node__content {
  position: relative;
  z-index: 0;
}
.el-tree-node__content:hover {
  background: transparent !important;
}
.el-tree-node.is-current > .el-tree-node__content {
  background: var(--color-background-soft) !important;
}
.el-tree-node.is-current > .el-tree-node__content::before {
  content: '';
  position: absolute;
  left: 0;
  top: 3px;
  bottom: 3px;
  width: 2px;
  background: var(--el-color-primary);
  border-radius: 2px;
  z-index: 2;
  pointer-events: none;
}
.el-tree-node__content:hover::after {
  content: '';
  position: absolute;
  left: 4px;
  right: 4px;
  top: 2px;
  bottom: 2px;
  background: var(--color-background-mute);
  border-radius: 6px;
  z-index: -1;
  pointer-events: none;
}

/* ========================================
   Dark Reader 风格深色模式全局样式
   ======================================== */
[data-theme='dark'] {
  /* 滚动条 Dark Reader 风格 */
  ::-webkit-scrollbar {
    width: 10px;
    height: 10px;
  }

  ::-webkit-scrollbar-track {
    background: var(--dr-bg-primary);
  }

  ::-webkit-scrollbar-thumb {
    background: var(--dr-border-light);
    border-radius: 5px;
  }

  ::-webkit-scrollbar-thumb:hover {
    background: #5a5d60;
  }

  /* 选中文本样式 */
  ::selection {
    background: rgba(92, 154, 255, 0.35);
    color: var(--dr-text-primary);
  }

  /* 链接样式 */
  a {
    color: var(--dr-accent);
  }

  a:hover {
    color: var(--dr-accent-hover);
  }

  /* 图片反色滤镜（可选，模拟 Dark Reader 效果） */
  img:not([src*='.svg']) {
    filter: brightness(0.9) contrast(1.05);
  }

  /* Element Plus 组件深度定制 */

  /* 按钮悬停效果 */
  .el-button:hover {
    background-color: var(--dr-bg-hover) !important;
    border-color: var(--dr-border-light) !important;
  }

  .el-button--primary {
    background-color: var(--dr-accent) !important;
    border-color: var(--dr-accent) !important;
  }

  .el-button--primary:hover {
    background-color: var(--dr-accent-hover) !important;
    border-color: var(--dr-accent-hover) !important;
  }

  .el-button--danger {
    background-color: var(--dr-danger) !important;
    border-color: var(--dr-danger) !important;
  }

  .el-button--success {
    background-color: var(--dr-success) !important;
    border-color: var(--dr-success) !important;
  }

  /* 输入框聚焦效果 */
  .el-input__wrapper {
    background-color: var(--dr-bg-tertiary) !important;
    box-shadow: 0 0 0 1px var(--dr-border) inset !important;
  }

  .el-input__wrapper:hover {
    box-shadow: 0 0 0 1px var(--dr-border-light) inset !important;
  }

  .el-input__wrapper.is-focus {
    box-shadow: 0 0 0 1px var(--dr-accent) inset !important;
  }

  .el-input__inner {
    color: var(--dr-text-primary) !important;
  }

  .el-input__inner::placeholder {
    color: var(--dr-text-muted) !important;
  }

  /* 下拉菜单 */
  .el-dropdown-menu {
    background-color: var(--dr-bg-elevated) !important;
    border-color: var(--dr-border) !important;
  }

  .el-dropdown-menu__item {
    color: var(--dr-text-primary) !important;
  }

  .el-dropdown-menu__item:hover {
    background-color: var(--dr-bg-hover) !important;
    color: var(--dr-accent) !important;
  }

  /* 对话框 */
  .el-dialog {
    background-color: var(--dr-bg-secondary) !important;
    border: 1px solid var(--dr-border) !important;
  }

  .el-dialog__header {
    border-bottom: 1px solid var(--dr-border) !important;
  }

  .el-dialog__title {
    color: var(--dr-text-primary) !important;
  }

  .el-dialog__footer {
    border-top: 1px solid var(--dr-border) !important;
  }

  /* 消息框 */
  .el-message-box {
    background-color: var(--dr-bg-secondary) !important;
    border-color: var(--dr-border) !important;
  }

  .el-message-box__title {
    color: var(--dr-text-primary) !important;
  }

  .el-message-box__message {
    color: var(--dr-text-secondary) !important;
  }

  /* 卡片 */
  .el-card {
    background-color: var(--dr-bg-secondary) !important;
    border-color: var(--dr-border) !important;
  }

  .el-card__header {
    border-bottom-color: var(--dr-border) !important;
    color: var(--dr-text-primary) !important;
  }

  /* 表格 */
  .el-table {
    background-color: var(--dr-bg-secondary) !important;
    color: var(--dr-text-primary) !important;
  }

  .el-table th.el-table__cell {
    background-color: var(--dr-bg-tertiary) !important;
    color: var(--dr-text-primary) !important;
  }

  .el-table tr {
    background-color: var(--dr-bg-secondary) !important;
  }

  .el-table--enable-row-hover .el-table__body tr:hover > td.el-table__cell {
    background-color: var(--dr-bg-hover) !important;
  }

  .el-table td.el-table__cell,
  .el-table th.el-table__cell.is-leaf {
    border-bottom-color: var(--dr-border) !important;
  }

  .el-table--border .el-table__cell {
    border-right-color: var(--dr-border) !important;
  }

  /* 树形控件 */
  .el-tree {
    background-color: transparent !important;
    color: var(--dr-text-primary) !important;
  }

  .el-tree-node__content:hover {
    background-color: transparent !important;
  }

  .el-tree-node.is-current > .el-tree-node__content {
    background-color: rgba(255, 255, 255, 0.08) !important;
  }
  .el-tree-node__content:hover::after {
    background-color: rgba(255, 255, 255, 0.05);
    pointer-events: none;
  }

  /* 表单标签 */
  .el-form-item__label {
    color: var(--dr-text-secondary) !important;
  }

  /* 分割线 */
  .el-divider {
    border-color: var(--dr-border) !important;
  }

  /* 标签页 */
  .el-tabs__item {
    color: var(--dr-text-secondary) !important;
  }

  .el-tabs__item.is-active {
    color: var(--dr-accent) !important;
  }

  .el-tabs__item:hover {
    color: var(--dr-accent-hover) !important;
  }

  /* 开关 */
  .el-switch.is-checked .el-switch__core {
    background-color: var(--dr-accent) !important;
    border-color: var(--dr-accent) !important;
  }

  /* 复选框 */
  .el-checkbox__input.is-checked .el-checkbox__inner {
    background-color: var(--dr-accent) !important;
    border-color: var(--dr-accent) !important;
  }

  .el-checkbox__label {
    color: var(--dr-text-primary) !important;
  }

  /* 单选框 */
  .el-radio__input.is-checked .el-radio__inner {
    background-color: var(--dr-accent) !important;
    border-color: var(--dr-accent) !important;
  }

  .el-radio__label {
    color: var(--dr-text-primary) !important;
  }

  /* 提示信息 */
  .el-tooltip__popper {
    background-color: var(--dr-bg-elevated) !important;
    border-color: var(--dr-border) !important;
    color: var(--dr-text-primary) !important;
  }

  /* 加载遮罩 */
  .el-loading-mask {
    background-color: rgba(24, 26, 27, 0.85) !important;
  }

  .el-loading-text {
    color: var(--dr-text-primary) !important;
  }

  /* 空状态 */
  .el-empty__description {
    color: var(--dr-text-muted) !important;
  }

  /* 分页 */
  .el-pagination button,
  .el-pagination .el-pager li {
    background-color: var(--dr-bg-tertiary) !important;
    color: var(--dr-text-primary) !important;
  }

  .el-pagination .el-pager li:hover {
    color: var(--dr-accent) !important;
  }

  .el-pagination .el-pager li.is-active {
    background-color: var(--dr-accent) !important;
    color: #fff !important;
  }

  /* Link 类型 danger 按钮在暗色模式下的样式 */
  .el-button--danger.is-link {
    background: transparent !important;
    border: none !important;
    color: var(--dr-danger-hover) !important;
  }

  .el-button--danger.is-link:hover {
    background: transparent !important;
    border: none !important;
    color: #ff7878 !important;
  }
}

/* ========================================
   分享页面独立主题样式（优先级高于全局主题）
   ======================================== */
[data-share-theme='dark'] {
  --color-background: var(--dr-bg-primary);
  --color-background-soft: var(--dr-bg-secondary);
  --color-background-mute: var(--dr-bg-tertiary);

  --color-border: var(--dr-border);
  --color-border-hover: var(--dr-border-light);

  --color-heading: var(--dr-text-primary);
  --color-text: var(--dr-text-primary);
  --color-text-secondary: var(--dr-text-secondary);

  --el-bg-color: var(--dr-bg-secondary);
  --el-bg-color-page: var(--dr-bg-primary);
  --el-bg-color-overlay: var(--dr-bg-elevated);
  --el-text-color-primary: var(--dr-text-primary);
  --el-text-color-regular: var(--dr-text-primary);
  --el-text-color-secondary: var(--dr-text-secondary);
  --el-text-color-placeholder: var(--dr-text-muted);
  --el-border-color: var(--dr-border-light);
  --el-border-color-light: var(--dr-border);
  --el-border-color-lighter: #353839;
  --el-border-color-extra-light: #2d2f30;
  --el-fill-color: var(--dr-bg-tertiary);
  --el-fill-color-light: var(--dr-bg-secondary);
  --el-fill-color-lighter: var(--dr-bg-primary);
  --el-fill-color-blank: var(--dr-bg-secondary);
  --el-color-white: var(--dr-bg-secondary);
  --el-mask-color: rgba(0, 0, 0, 0.75);

  --el-color-primary: var(--dr-accent);
  --el-color-primary-light-3: #4a7fd9;
  --el-color-primary-light-5: #3d6bb8;
  --el-color-primary-light-7: #2f5797;
  --el-color-primary-light-9: #223f6e;
  --el-color-primary-dark-2: var(--dr-accent-hover);
  --color-primary: var(--dr-accent);

  --el-table-bg-color: var(--dr-bg-secondary);
  --el-table-tr-bg-color: var(--dr-bg-secondary);
  --el-table-header-bg-color: var(--dr-bg-tertiary);
  --el-table-row-hover-bg-color: var(--dr-bg-hover);
  --el-table-border-color: var(--dr-border);
  --el-table-text-color: var(--dr-text-primary);

  --el-card-bg-color: var(--dr-bg-secondary);

  --el-input-bg-color: var(--dr-bg-tertiary);
  --el-input-text-color: var(--dr-text-primary);
  --el-input-border-color: var(--dr-border);

  --el-button-bg-color: var(--dr-bg-tertiary);
  --el-button-text-color: var(--dr-text-primary);
  --el-button-hover-bg-color: var(--dr-bg-hover);
  --el-button-border-color: var(--dr-border);

  --el-dialog-bg-color: var(--dr-bg-secondary);
  --el-dialog-box-shadow: 0 4px 24px rgba(0, 0, 0, 0.5);

  --el-dropdown-menu-bg-color: var(--dr-bg-elevated);
  --el-dropdown-menu-border-color: var(--dr-border);

  --el-message-bg-color: var(--dr-bg-elevated);
  --el-message-border-color: var(--dr-border);

  --el-tree-node-hover-bg-color: var(--dr-bg-hover);
}

/* ========================================
   移动端适配全局样式
   ======================================== */

@media (max-width: 768px) {
  .el-dialog {
    width: 95% !important;
    max-width: 95% !important;
    margin: 20px auto !important;
  }

  .el-dialog__body {
    padding: 16px 20px;
    max-height: 60vh;
    overflow-y: auto;
  }

  .el-dialog__footer {
    padding: 12px 20px;
  }

  .el-button--small {
    padding: 6px 10px;
    min-height: 32px;
  }

  .el-button.is-circle {
    width: 32px;
    height: 32px;
    min-width: 32px;
    min-height: 32px;
  }

  .el-dropdown-menu {
    max-width: 90vw;
  }

  .el-dropdown-menu__item {
    padding: 12px 16px;
    min-height: 44px;
    line-height: 1.4;
  }

  .el-table {
    font-size: 13px;
  }

  .el-table .cell {
    padding: 8px;
  }

  .el-table__body tr {
    min-height: 48px;
  }
}

@media (max-width: 480px) {
  .el-dialog {
    width: 98% !important;
    margin: 10px auto !important;
  }

  .el-dialog__header {
    padding: 12px 16px;
  }

  .el-dialog__title {
    font-size: 16px;
  }
}
